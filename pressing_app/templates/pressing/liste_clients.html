{% extends "pressing/index.html" %}

{% block title %}Liste des clients - Pressing App{% endblock %}

{% block content %}
<form method="POST">
    {% csrf_token %}   
    <input type="text" name="searchInput" placeholder="Rechercher un client par nom, tÃ©lÃ©phone...">
    <button id="searchButton" type="submit">ğŸ” Rechercher</button>
</form>

{% if erreur %}
    <div class="error-message">
        <h2>âš ï¸ {{ erreur }}</h2>
    </div>
{% elif client %}
    <h2>ğŸ“‹ RÃ©sultats de la recherche</h2>
    <table id="find">
        <thead>
            <tr>
                <th>Nom</th>
                <th>TÃ©lÃ©phone</th>
                <th>Email</th>
                <th>Adresse</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for c in client %}
            <tr>
                <td>{{ c.nom }}</td>
                <td>{{ c.telephone }}</td>
                <td>{{ c.email }}</td>
                <td>{{ c.adresse }}</td>
                <td><a href="{% url 'modifier_client' c.id %}">Modifier</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}

<h1>ğŸ‘¥ Liste des clients</h1>

{% if clients %}
<table>
    <thead>
        <tr>
            <th>#</th>
            <th>Nom</th>
            <th>TÃ©lÃ©phone</th>
            <th>Email</th>
            <th>Adresse</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for client in clients %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ client.nom }}</td>
            <td>{{ client.telephone }}</td>
            <td>{{ client.email }}</td>
            <td>{{ client.adresse }}</td>
            <td>
                <a href="{% url 'modifier_client' client.pk %}">âœï¸ Modifier</a>
                <a href="{% url 'supprimer_client' client.pk %}" 
                   onclick="return confirm('Voulez-vous vraiment supprimer dÃ©finitivement ce client ?');"
                   style="background: var(--error); color: white;">ğŸ—‘ï¸ Supprimer</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p style="text-align: center; padding: 2rem; color: var(--gray-400);">Aucun client enregistrÃ©.</p>
{% endif %}

<div style="margin-top: var(--spacing-lg); display: flex; gap: 1rem; flex-wrap: wrap;">
    <a href="{% url 'creer_client' %}">â• Ajouter un client</a>
</div>
{% endblock %}
